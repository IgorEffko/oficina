<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vistoria</title>
   <link rel="stylesheet" href="css/vistoria.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="js/script.js"></script>
</head>
<body>
    
</head>
<body>
    <div class="formulario-com-borda">
        <h1>Vistoria Veicular</h1>
        <hr>
        
        <b>O veículo chegou com:</b>
        <p>Selecione os itens presentes:</p>

        <div class="checkbox-personalizado">
            <input type="checkbox" id="boxpneu">
            <label for="boxpneu">Pneu</label>
        </div>
        <div class="checkbox-personalizado">
            <input type="checkbox" id="boxstep">
            <label for="boxstep">Step</label>
        </div>
        <div class="checkbox-personalizado">
            <input type="checkbox" id="boxmacaco">
            <label for="boxmacaco">Macaco</label>
        </div>
        <div class="checkbox-personalizado">
            <input type="checkbox" id="boxchave">
            <label for="boxchave">Chave de Roda</label>
        </div>
        
        <b>Outros itens:</b>
        <textarea id="descricao" placeholder="Ex: óculos, bolsa, sacola, documentos..."></textarea>

        <div class="termo-aceitacao">
            <div class="termo-titulo">Termo de Aceitação</div>
            <div class="termo-texto">
                Eu, proprietário do veículo [Marca e Modelo do Veículo], placa [Placa do Veículo], 
                declaro, para todos os fins de direito, que concordo e atesto que o meu veículo 
                entrou nas instalações da oficina EJCAR com os seguintes objetos em seu interior. 
                Compreendo que esta lista representa os itens presentes no veículo no momento da 
                sua entrada na oficina. Cascavel-Paraná!
            </div>
            
            <div class="checkbox-personalizado" style="justify-content: center;">
                <input type="checkbox" id="termoCheckbox">
                <label for="termoCheckbox">Eu li e concordo com as condições apresentadas</label>
            </div>
        </div>

        <div class="signature-container">
            <div class="signature-header">
                <h3><i class="fas fa-signature"></i> Assinatura Digital</h3>
                <button type="button" class="clear-btn" id="clearSignature">Limpar Assinatura</button>
            </div>
            <canvas id="signaturePad" width="500" height="200"></canvas>
            <div class="signature-footer">
        </div>

   
        <div class="btn-container">
            <button class="btn-danger" id="concluirBtn">Concluir</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('signaturePad');
            const clearBtn = document.getElementById('clearSignature');
            const signatureData = document.getElementById('signatureData');
            const ctx = canvas.getContext('2d');
            
        
            const scale = window.devicePixelRatio || 1;
            canvas.width = canvas.offsetWidth * scale;
            canvas.height = canvas.offsetHeight * scale;
            ctx.scale(scale, scale);
            
            
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.strokeStyle = '#000';
            
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            
         
            function startDrawing(e) {
                isDrawing = true;
                const pos = getPosition(e);
                [lastX, lastY] = [pos.x, pos.y];
            }
            
         
            function draw(e) {
                if (!isDrawing) return;
                
                const pos = getPosition(e);
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(pos.x, pos.y);
                ctx.stroke();
                
                [lastX, lastY] = [pos.x, pos.y];
              
                signatureData.value = canvas.toDataURL();
            }
            
     
            function stopDrawing() {
                isDrawing = false;
                signatureData.value = canvas.toDataURL();
            }

            function getPosition(e) {
                const rect = canvas.getBoundingClientRect();
                let clientX, clientY;
                
                if (e.type.includes('touch')) {
                    clientX = e.touches[0].clientX;
                    clientY = e.touches[0].clientY;
                } else {
                    clientX = e.clientX;
                    clientY = e.clientY;
                }
                
                return {
                    x: (clientX - rect.left) * (canvas.width / rect.width / scale),
                    y: (clientY - rect.top) * (canvas.height / rect.height / scale)
                };
            }
            
           
            function clearSignature() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                signatureData.value = '';
            }
            
          
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
     
            canvas.addEventListener('touchstart', startDrawing);
            canvas.addEventListener('touchmove', draw);
            canvas.addEventListener('touchend', stopDrawing);

            clearBtn.addEventListener('click', clearSignature);
            
    
            const concluirBtn = document.getElementById('concluirBtn');
            concluirBtn.addEventListener('click', function() {
                alert('Vistoria registrada com sucesso! Obrigado.');
            });
        });
    </script>
</html>